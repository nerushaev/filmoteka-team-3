{"mappings":"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","sources":["src/js/thema.js","src/js/refs.js","src/js/formattedGenresOnHomePage.js","src/js/storage.js","src/js/renderMarkupLibrary.js","src/js/modal.js"],"sourcesContent":["const checkbox = document.querySelector('#theme-switch-toggle');\n\nconst Theme = {\n  LIGHT: 'light-theme',\n  DARK: 'dark-theme',\n};\n\ndocument.body.classList.add(Theme.LIGHT);\n\ncheckbox.addEventListener('change', onCheckboxChange);\n\nfunction onCheckboxChange() {\n  document.body.classList.toggle(Theme.DARK);\n  document.body.classList.toggle(Theme.LIGHT);\n\n  setThemeInfoToLocalStorage();\n}\n\nfunction setThemeInfoToLocalStorage() {\n  if (document.body.classList.contains(Theme.LIGHT)) {\n    checkbox.setAttribute('checked', false);\n    localStorage.setItem('active-theme', Theme.LIGHT);\n  } else if (document.body.classList.contains(Theme.DARK)) {\n    checkbox.setAttribute('checked', true);\n    localStorage.setItem('active-theme', Theme.DARK);\n  }\n}\n\ngetThemeInfoFromLocalStorage();\n\nfunction getThemeInfoFromLocalStorage() {\n  if (localStorage.getItem('active-theme') === Theme.DARK) {\n    onCheckboxChange();\n  }\n}\n","const refs = {\n  API_KEY: 'ade224e438a5cac910232dacab4d697a',\n  POPULAR_URL: 'https://api.themoviedb.org/3/trending/movie/day',\n  GENRES_URL: 'https://api.themoviedb.org/3/genre/movie/list',\n  SEARCH_URL: 'https://api.themoviedb.org/3/search/movie',\n\n  STORAGE_KEY: 'genres_key',\n  LS_KEY_POPULAR_MOVIE: 'popular_movie_key',\n  LS_KEY_QUERY_MOVIE: 'query_movie_key',\n  LS_KEY_WATCH_MOVIE: 'watch_movie_key',\n\n  gallerySetEL: document.querySelector('.js-gallery__set'),\n  backdropEl: document.querySelector('.js-backdrop'),\n  modalInfoEL: document.querySelector('.js-modal__info'),\n  containerModalInfo: document.querySelector('.js-film__container--info'),\n  closeBtnModalInfo: document.querySelector('.js-btn__info--close'),\n  watchedBtnModalInfo: document.querySelector('.js-btn__info--watched'),\n  queueBtnModalInfo: document.querySelector('.js-btn__info--queue'),\n  homePageGallery: document.querySelector('.gallery__set'),\n  watchedBtnLibrary: document.querySelector('.lib__watched'),\n  queueBtnLibrary: document.querySelector('.lib__queue'),\n  galleryContainerLibrary: document.querySelector('.gallery__library__set'),\n\n  IMG_URL: 'https://image.tmdb.org/t/p/w500',\n};\n\nconst userSearch = {\n  userSearchInputRef: document.querySelector('.header__input'),\n  searchButton: document.querySelector('.form-icon'),\n  formNotificationErr: document.querySelector('.form-notification'),\n};\n\nexport { refs, userSearch };\n","import { refs } from './refs';\n\nexport function renderGenresHomePage(idFilmGenre) {\n  const genresList = localStorage.getItem(refs.STORAGE_KEY);\n  const genresListFind = JSON.parse(genresList).genresData;\n  const ganres = idFilmGenre.map(\n    element => genresListFind.find(genre => genre.id == element).name\n  );\n\n  if (ganres.length > 3) {\n    ganres.splice(3);\n    ganres[2] = 'Other';\n  } else if (ganres.length === 0) {\n    ganres[0] = 'Genre unknown';\n  }\n\n  return ganres.join(', ');\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nexport default {\n  save,\n  load,\n  remove,\n};","import { refs } from './refs';\nimport { renderGenresHomePage } from './formattedGenresOnHomePage';\nimport storage from './storage';\n\nif (refs.watchedBtnLibrary) {\n  refs.watchedBtnLibrary.addEventListener('click', onWatchedLibrary);\n}\n\nif (refs.queueBtnLibrary) {\n  refs.queueBtnLibrary.addEventListener('click', onQueueLibrary);\n}\n\nasync function onWatchedLibrary(evt) {\n    evt.preventDefault();\n    refs.watchedBtnLibrary.classList.add('btn__is-active');\n    refs.queueBtnLibrary.classList.remove('btn__is-active');\n\n    console.log(refs.galleryContainerLibrary);\n\n\n    const data = await storage.load(refs.LS_KEY_WATCH_MOVIE);\n    console.log(data);\n    renderMarkupLibrary(data);\n}\n\nasync function onQueueLibrary(evt) {\n   evt.preventDefault();\n    refs.queueBtnLibrary.classList.add('btn__is-active');\n    refs.watchedBtnLibrary.classList.remove('btn__is-active');\n \n    const data = await storage.load(refs.LS_KEY_QUERY_MOVIE);\n    console.log(data);\n    renderMarkupLibrary(data);\n}\n\nfunction renderMarkupLibrary(data) {\n    console.log('data', data);\n  const markup = data\n    .map(({ id, poster_path, genre_ids, release_date, title, vote_average }) => {\n      return `<li class=\"gallery__item\">\n                <a  class=\"gallery__item__link\"  target=\"_blank\" rel=\"noopener noreferrer\">\n                   ${\n                     poster_path\n                       ? `<img class=\"gallery__item__img\" data-id=\"${id}\" src=\"${refs.IMG_URL}${poster_path}\" alt=\"${title}\">`\n                       : `<img class=\"gallery__item__img\" data-id=\"${id}\" src=\"https://sd.keepcalms.com/i-w600/keep-calm-poster-not-found.jpg\" alt=\"${title}\">`\n                   } \n                    <div class=\"gallery__item__text\">\n                        ${\n                          title\n                            ? `<h3 class=\"gallery__item__title\">${title}</h3>`\n                            : `<h3 class=\"gallery__item__title\">${original_name}</h3>`\n                        }\n                        <div class=\"gallery__item__descr\">\n                           ${\n                             genre_ids\n                               ? `<p class=\"genre\">${renderGenresHomePage(\n                                   genre_ids\n                                 )}`\n                               : ''\n                           } ${\n        release_date\n          ? `| <span class=\"genre\">  ${release_date.slice(0, 4)}</span>`\n          : ''\n      } </p>    \n       <span class=\"rating\">${vote_average.toFixed(1)}</span>\n                        </div>\n                    </div>\n                </a>\n            </li>`;\n    })\n    .join('');\n\n    console.log(markup);\n    refs.galleryContainerLibrary.insertAdjacentHTML(\"afterbegin\", markup);\n       // ('beforeend', markup);\n}\n","const refs = {\n    openModalFooter: document.querySelector('.footer-link'),\n    closeModalBtnFooter: document.querySelector('.team-modal__close'),\n    backdropFooter: document.querySelector('.team-modal'),\n    galleryLink: document.querySelectorAll('.gallery-home'),\n    btnModal: document.querySelector('.modal-close'),\n    backdrop: document.querySelector('.backdrop'),\n    galleryHome: document.querySelector('.gallery-home'),\n  };\n\n  refs.openModalFooter.addEventListener('click', openModal);\n  refs.closeModalBtnFooter.addEventListener('click', closeModal);\n  refs.backdropFooter.addEventListener('click', onClickBackdrop);\n  \n  function openModal() {\n    refs.backdropFooter.classList.remove('backdrop--hidden');\n    document.body.style.overflow = 'hidden';\n    window.addEventListener('keydown', onEscKeyPress);\n  }\n  function closeModal() {\n    refs.backdropFooter.classList.add('backdrop--hidden');\n    document.body.style.overflow = '';\n    window.removeEventListener('keydown', onEscKeyPress);\n  }\n  function onClickBackdrop(event) {\n    if (event.currentTarget === event.target) {\n      closeModal();\n    }\n  }\n  \n  function closeModalGallery() {\n    refs.backdrop.classList.add('backdrop--hidden');\n    document.body.style.overflow = '';\n  }\n  \n  function onEscKeyPress(event) {\n    if (event.code === 'Escape') {\n      closeModal();\n    }\n  }"],"names":["$6a8c4410e06985ab$var$checkbox","document","querySelector","$6a8c4410e06985ab$var$Theme","$6a8c4410e06985ab$var$onCheckboxChange","body","classList","toggle","contains","setAttribute","localStorage","setItem","add","addEventListener","getItem","$ee27a4d7c64fc8c4$export$21666b427502ea6d","API_KEY","POPULAR_URL","GENRES_URL","SEARCH_URL","STORAGE_KEY","LS_KEY_POPULAR_MOVIE","LS_KEY_QUERY_MOVIE","LS_KEY_WATCH_MOVIE","gallerySetEL","backdropEl","modalInfoEL","containerModalInfo","closeBtnModalInfo","watchedBtnModalInfo","queueBtnModalInfo","homePageGallery","watchedBtnLibrary","queueBtnLibrary","galleryContainerLibrary","IMG_URL","$2b1a683cfd678db4$export$c760c56c05a4c9a4","idFilmGenre","genresList","genresListFind","JSON","parse","genresData","ganres","map","element","find","genre","id","name","length","splice","join","$3fff5e8daf4b13a6$export$2e2bcd8739ae039","key","value","serializedState","stringify","error","console","message","undefined","removeItem","$d8f2a5a1b724d40d$var$renderMarkupLibrary","data","log","markup","poster_path","genre_ids","release_date","title","vote_average","original_name","slice","toFixed","insertAdjacentHTML","async","evt","preventDefault","remove","load","$8a7e756c566dd1ea$var$refs","openModalFooter","closeModalBtnFooter","backdropFooter","galleryLink","querySelectorAll","btnModal","backdrop","galleryHome","$8a7e756c566dd1ea$var$closeModal","style","overflow","window","removeEventListener","$8a7e756c566dd1ea$var$onEscKeyPress","event","code","currentTarget","target"],"version":3,"file":"myLibrary.46dbd120.js.map"}